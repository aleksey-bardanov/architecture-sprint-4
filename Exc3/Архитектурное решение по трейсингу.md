# Архитектурное решение по трейсингу

## Мотивация

Сейчас мы не знаем какие этапы требуют больше всего времени на обработку в процессе обработки заказа. Для того, чтобы точно выяснить на каких участках данные задерживаются или теряются требуется настроить трейсинг запросов в системе.

## Предлагаемое решение

Предлагается настроить трейсинг сообщений о статусе заказа на базе инструмента Jaeger. В первую очередь требуется настроить трейсинг в сервисе MES, так как предполагается, что именно в этом сервисе случаются самые длительные и серьезные задержки. 

Схема интеграции Jaeger в систему в [приложении](./TracingArchitecture.puml).

## Компромиссы

В конечном итоге нужно будет отслеживать статус заказа от создания до отправки заказчику, но в первую очередь требуется настроить контроль за временем перехода между состояниями заказа PRICE_CALCULATED -> MANUFACTURING_APPROVED -> MANUFACTURING_STARTED. Это потребует интеграции экспортеров в сервисы CRM и MES. 

## Аспекты безопасности

1. Внедрение аутентификации — зайти в систему трейсинга могут только сотрудники компании с актуальной учетной записью и ролью “Поддержка”
2. Требуется, чтобы все участники коммуникации поддерживали TLS и осуществляли обмен информацией с использованием цифровых сертификатов 