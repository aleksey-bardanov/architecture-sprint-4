# Планирование: анализ, идентификация проблем и поиск решений

## Текущее положение дел

- Система состоит из MES (manufacturing execution system) и CRM (customer relationship management)
- Нагрузка растет линейно, темпы прироста - 100 заказов в месяц
- При размещении заказа на платформе оценивается длительность выполнения заказа. Нормальный срок порядка одного месяца
- Открыт API MES для приема B2B заказов, теперь можно создать заказ через MES
- MES куплен отдельно, чтобы рассчитывать стоимость изготовления изделий, взаимодействует с CRM через RabbitMQ
- Расчет стоимости может занимать от 2 до 30 минут
- Операторы берут самые новые заказы, так как за них идет вознаграждение

## Проблемы, которые предстоит решить

- Просроченные заказы. Время от размещения заказа на платформе до получения клиентом готового изделия может составлять несколько месяцев.
- Клиенты получают недостоверную информацию о сроках изготовления изделия. Реальные сроки не соответствуют оценке.
- Открытие B2B API привело к увеличению просроченных заказов
- MES долго загружает список заказов в работе, отсортированный по статусам
- B2B и B2C клиенты уходят
- Редкие релизы из-за того, что долго чинятся баги

## Выявленные проблемы

- MES передает список заказов напрямую из БД
- Чтобы взять заказ в работу, нужно чтобы асинхронно повзаимодействовали CRM и MES 2 раза (сперва калькуляция ценны, потом изготовление)
- MES может быть загружен расчетами стоимости (B2B заказы) 
- В команде никто не знает React, но FrontEnd MES написан на React, команда вносила туда изменения
- Отсутствует нагрузочное тестирование
- Не выработаны нефункциональные требования

## Предлагаемые инициативы в порядке приоритета

- Мониторинг системы 
- Нужно понять где тормозит (трейсинг)
- Логирование. Хорошо бы понимать как меняются статусы заказов и 
- КЭШ для MES
- Поисковый движок для MES, чтобы отслеживать статусы заказов
- Сокращение релизного цикла 

### Целевая архитектура через пол года

Целевая архитектура представлена на [диаграмме](%20TargetArchitecture.puml)

### Самые основные изменения